(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Ui:()=>s,RC:()=>b,zN:()=>C});var t=document.getElementsByName("new-place")[0],o=document.querySelector(".popup__input_type_card-name"),n=document.querySelector(".popup__input_type_url");function r(e,t,o,n,r,c,i){var u=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0);return u.querySelector(".card__image").src=e.link,u.querySelector(".card__title").textContent=e.name,u.querySelector(".card__image").alt=e.name,u.querySelector(".card__delete-button").addEventListener("click",(function(){n(u,e._id)})),u.querySelector(".card__like-counter").textContent=r.length,c!==i&&u.querySelector(".card__delete-button").classList.add("card__delete-button-visible"),s.addEventListener("click",t),s.addEventListener("click",o),u}function c(e,t){e.remove(),C(t)}function i(e){e.target.classList.contains("card__like-button")&&e.target.classList.toggle("card__like-button_is-active")}function u(e){e.classList.add("popup_is-animated"),setTimeout((function(){e.classList.add("popup_is-opened")}),10),document.addEventListener("keydown",a),b(e)}function a(e){"Escape"===e.key&&p(document.querySelector(".popup_is-opened"))}function p(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",a)}var s=document.querySelector(".places__list");Array.from(document.querySelectorAll(".popup__close")).forEach((function(e){e.addEventListener("click",(function(){return p(e.closest(".popup"))}))})),document.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_is-opened")&&p(e.target)})),t.addEventListener("submit",(function(e){e.preventDefault();var u=o.value,a=n.value,l=[];l.name=u,l.link=a,s.prepend(r(l,i,S,c,[],L,L)),p(t.closest(".popup_is-opened")),E(u,a),t.reset()}));var l=document.querySelector(".popup__input_type_name"),d=document.querySelector(".popup__input_type_description"),_=document.getElementById("popup__form");_.addEventListener("submit",(function(e){e.preventDefault();var t=l.value,o=d.value,n=document.querySelector(".profile__title"),r=document.querySelector(".profile__description");n.textContent=t,r.textContent=o,p(_.closest(".popup_is-opened")),g(n.textContent,r.textContent)}));var f=document.querySelector(".profile__edit-button"),m=document.querySelector(".popup_type_edit"),y=document.querySelector(".profile__add-button"),v=document.querySelector(".popup_type_new-card");function S(e){if(e.target.classList.contains("card__image")){var t=document.querySelector(".popup_type_image"),o=e.target.closest(".places__item").querySelector(".card__image").src,n=e.target.closest(".places__item").querySelector(".card__title").textContent,r=t.querySelector(".popup__image"),c=t.querySelector(".popup__caption");r.src=o,c.textContent=n,u(t)}}function h(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var o=e.querySelector(".".concat(t.id,"-error"));o.textContent="",o.classList.remove("popup__input_error_visible"),t.classList.remove("popup__input_error")}(e,t):function(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));n.textContent=o,n.classList.add("popup__input_error_visible"),t.classList.add("popup__input_error")}(e,t,t.validationMessage),t.removeEventListener("input",(function(){h(e,t),q(inputList,buttonElement)}))}function q(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.classList.remove("popup__button_disabled"):t.classList.add("popup__button_disabled")}function b(e){Array.from(e.querySelectorAll(".popup__input-error-text")).forEach((function(e){e.textContent=""})),Array.from(e.querySelectorAll(".popup__input")).forEach((function(e){e.classList.remove("popup__input_error")}))}f.addEventListener("click",(function(){u(m);var e=document.querySelector(".profile__title").textContent,t=document.querySelector(".profile__description").textContent,o=document.querySelector(".popup__input_type_name"),n=document.querySelector(".popup__input_type_description");o.value=e,n.value=t})),y.addEventListener("click",(function(){u(v)})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(".popup__input")),o=e.querySelector(".popup__button");q(t,o),t.forEach((function(n){n.addEventListener("input",(function(){h(e,n),q(t,o)}))}))}(e)}));var L=null;fetch("https://nomoreparties.co/v1/wff-cohort-11/users/me",{headers:{authorization:"a05cfe34-771a-4bf5-8666-626b8e6ea135"}}).then((function(e){return e.json()})).then((function(e){document.querySelector(".profile__title").textContent=e.name,document.querySelector(".profile__description").textContent=e.about,document.querySelector(".profile__image").style.backgroundImage="url(".concat(e.avatar,")"),L=e._id})),fetch("https://nomoreparties.co/v1/wff-cohort-11/cards",{headers:{authorization:"a05cfe34-771a-4bf5-8666-626b8e6ea135"}}).then((function(e){return e.json()})).then((function(e){e.forEach((function(e){s.append(r(e,i,S,c,e.likes,L,e.owner._id,e._id)),console.log(e)}))}));var g=function(e,t){fetch("https://nomoreparties.co/v1/wff-cohort-11/users/me",{method:"PATCH",headers:{authorization:"a05cfe34-771a-4bf5-8666-626b8e6ea135","Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})},E=function(e,t){fetch("https://nomoreparties.co/v1/wff-cohort-11/cards",{method:"POST",headers:{authorization:"a05cfe34-771a-4bf5-8666-626b8e6ea135","Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})},C=function(e){fetch("https://nomoreparties.co/v1/wff-cohort-11/cards/".concat(e),{method:"DELETE",headers:{authorization:"a05cfe34-771a-4bf5-8666-626b8e6ea135","Content-Type":"application/json"}})}})();